version: 1

AppDir:
  path: ./AppDir
  
  app_info:
    id: dev.arsfeld.Reel
    name: Reel
    icon: dev.arsfeld.Reel
    version: !ENV ${VERSION}
    exec: usr/bin/reel
    exec_args: $@

  files:
    include:
      - /usr/lib/x86_64-linux-gnu/gtk-4.0/**
      - /usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/**
      - /usr/lib/x86_64-linux-gnu/libgtk-4.so*
      - /usr/lib/x86_64-linux-gnu/libadwaita-1.so*
      - /usr/lib/x86_64-linux-gnu/libgstreamer*.so*
      - /usr/lib/x86_64-linux-gnu/gstreamer-1.0/**
      - /usr/lib/x86_64-linux-gnu/libmpv.so*
      - /usr/share/glib-2.0/schemas/**
      - /usr/share/icons/Adwaita/**
      - /usr/share/icons/hicolor/**
    exclude:
      - usr/share/man
      - usr/share/doc

  runtime:
    env:
      GST_PLUGIN_PATH: $APPDIR/usr/lib/x86_64-linux-gnu/gstreamer-1.0
      GST_PLUGIN_SCANNER: $APPDIR/usr/lib/x86_64-linux-gnu/gstreamer1.0/gstreamer-1.0/gst-plugin-scanner
      GDK_PIXBUF_MODULEDIR: $APPDIR/usr/lib/x86_64-linux-gnu/gdk-pixbuf-2.0/2.10.0/loaders
      GTK_THEME: Adwaita

  test:
    fedora-30:
      image: appimagecrafters/tests-env:fedora-30
      command: ./AppRun --version
    debian-stable:
      image: appimagecrafters/tests-env:debian-stable
      command: ./AppRun --version
    ubuntu-xenial:
      image: appimagecrafters/tests-env:ubuntu-xenial
      command: ./AppRun --version

AppImage:
  arch: x86_64
  update-information: gh-releases-zsync|yourusername|reel|latest|Reel-*.AppImage.zsync